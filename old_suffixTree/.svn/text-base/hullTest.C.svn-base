#include <iostream>
#include <algorithm>
#include "cilk.h"
#include "geom.h"
#include "geomGen.h"
#include "gettime.h"
using namespace std;

int Hull(point2d*, point2d*, int);

int cilk_main(int argc, char* argv[]) {
  int n = 10, cnt = 8;
  if (argc > 1) n = std::atoi(argv[1]);



{
    point2d* Pin = newA(point2d,n);
    point2d* Pout = newA(point2d,n);
    for(int i=0; i < n; i++) Pin[i] = dataGen::randOnUnitCircle2d(i);
    startTime();
    int m = Hull(Pin,Pout,n);
    stopTime(.1,"Convex Hull (random on unit circle)");
    free(Pin); free(Pout);
  }

  {
    point2d* Pin = newA(point2d,n);
    point2d* Pout = newA(point2d,n);
    for(int i=0; i < n; i++) Pin[i] = dataGen::randInUnitCircle2d(i);
    startTime();
    int m = Hull(Pin,Pout,n);
    stopTime(.3,"Convex Hull (random in unit circle)");
    free(Pin); free(Pout);
  }

  {
    point2d* Pin = newA(point2d,n);
    point2d* Pout = newA(point2d,n);
    for(int i=0; i < n; i++) Pin[i] = dataGen::randProjectedParabola2d(i);

    startTime();
    int m = Hull(Pin,Pout,n);
    stopTime(.3,"Convex Hull (random projected Parabola)");
    free(Pin); free(Pout);
  }

  reportTime("Convex Hull (weighted average)");
}
