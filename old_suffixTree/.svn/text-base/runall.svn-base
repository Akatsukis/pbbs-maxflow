#!/usr/bin/python
#
# run all tests
#

import os
import sys

os.system("echo HOSTNAME: `hostname`")
os.system("svn info")
os.system("make all")

largeSize =  100000000
mediumSize = 10000000
smallSize =  1000000

tests = [
["sequenceTest",largeSize],
["mergeTest",largeSize],
#["randPermTest",largeSize],
["intSortTest",largeSize],
["quickSortTest",largeSize],
["sampleSortTest",largeSize],
["serialSortTest",largeSize,'s'],
["remDuplicatesTest",mediumSize],
["tableTest",mediumSize],
["maxIndSetTest",mediumSize],
["colorGraphTest",mediumSize],
["maxMatchingTest",mediumSize],
["separatorTest",mediumSize],
["bfsTest",mediumSize],
["buildTreeTest",mediumSize],
["delaunayTest",mediumSize],
["nearestNeighborTest",mediumSize],
["spmvTest",smallSize],
#["editGraph",mediumSize],
["nbodyTest",smallSize],
["suffixArrayTest",mediumSize],
["hullTest",mediumSize],
["mstTest",mediumSize],
["serialMstTest",mediumSize,'s'],
]

processors = [1,2,4,8]

if (len(sys.argv) > 1) :
  tests = [test for test in tests if test[0] in sys.argv]

for test in tests :
  if (len(test) == 2) or test[2]=='p' :
    for p in processors :
      ss = "./runtest "+test[0]+" "+`test[1]`+" "+`p`
      os.system("echo")
      os.system("echo "+ss)
      os.system(ss)
  elif test[2] == 's' :
    ss = "./"+test[0]+" "+`test[1]`
    os.system("echo")
    os.system("echo "+ss)
    os.system(ss)
